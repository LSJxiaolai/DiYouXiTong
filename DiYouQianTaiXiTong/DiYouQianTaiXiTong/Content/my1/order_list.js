/* SVN.committedRevision=7b9f903 */
var _personalObject={resizeTimer:null,getWindowSize:function(){var a={width:0,height:0};if(typeof document.compatMode!="undefined"&&document.compatMode=="CSS1Compat"){a.width=document.documentElement.clientWidth;a.height=document.documentElement.clientHeight}else{if(typeof document.body!="undefined"&&(document.body.scrollLeft||document.body.scrollTop)){a.width=document.body.clientWidth;a.height=document.body.clientHeight}}return a},screenWidthInit:function(){},menuInit:function(){if(!!$("#grid_4").length>0){$.post("../personal_menu/personal_menu.html",function(a){$("#grid_4").append(a);_personalObject.leftMenuCss()})}},leftMenuCss:function(){var a=$(".mod_personal_menu .big_title");if(!!a.length){a.delegate("a","click",function(){$(this).addClass("selected")})}},initFun:function(){this.menuInit()
}};(function(a){a.fn.extend({PopupDialog:function(b){var c={popupClass:"",maskLayer:true,delayClose:null,callback:function(){}};var b=a.extend(true,c,b);this.each(function(){var k=a(this),h=a(b.popupClass).outerWidth(),e=a(b.popupClass).outerHeight(),d=a(window).scrollTop(),j=a(window).height(),g=a(document).height(),i;var f={init:function(){var m=(j-e)/2+d,l=m<d?d:m;a(b.popupClass).css({marginLeft:-(h/2),top:l,display:"block"});a(".pop_close",b.popupClass).unbind("click").bind("click",f.layerClose);if(b.maskLayer){f.maskModel()}if(b.delayClose!=null){f.delayModel()}},maskModel:function(){a(b.popupClass).after("<div class='popup_mask'></div>");a(".popup_mask").css("height",g);if(/msie\s+[5-6]\./i.test(window.navigator.userAgent)){a(".popup_mask").after("<iframe class='popup_iframe' frameborder='0'></iframe>");
a(".popup_iframe").css("height",g)}},layerClose:function(){window.clearInterval(i);a(b.popupClass).hide();a(".popup_mask").remove();a(".popup_iframe").remove()},delayModel:function(){a(".delayClose",b.popupClass).text(b.delayClose);var l=b.delayClose;i=setInterval(function(){if(l==1){window.clearInterval(i);f.layerClose();b.callback()}else{l--;a(".delayClose",b.popupClass).text(l)}},1000)}};f.init()});return this}})})(jQuery);(function(b){b.fn.extend({scrollPlugin:function(a){var d={prevClassName:".prev",nextClassName:".next",disableStyle:{opacity:".2",cursor:"default"},slideClassName:".slideUl",distance:"screen",viewDot:"false",showItem:6,speed:200,callBack:function(){}};var a=b.extend(true,d,a);this.each(function(){var u=b(this),x=b(a.prevClassName,u),v=b(a.nextClassName,u),o=b(a.slideClassName,u),p=o.find("li").length,t=o.find("li").outerWidth(true),q,c,s=0,r;switch(a.distance){case"single":q=t;c=p-a.showItem;break;case"screen":q=t*a.showItem;c=Math.ceil(p/a.showItem)-1;break}if(c<=0){x.hide();v.hide();return false}var w={init:function(){o.css({width:t*p});x.css(a.disableStyle).unbind("click").bind("click",w.rightScroll);v.unbind("click").bind("click",w.leftScroll);w.dotViewEvent();a.callBack()},leftScroll:function(){if(!o.is(":animated")){s+=1;
s==c+1?s=c:"";if(s==c){w.toLastPage()}else{w.showPlay("-",q)}x[0].removeAttribute("style");w.dotHighlight()}},rightScroll:function(){if(!o.is(":animated")){s-=1;s==-1?s=0:"";if(s==0){w.toFirstPage()}else{w.showPlay("+",q)}v[0].removeAttribute("style");w.dotHighlight()}},showPlay:function(f,e){o.stop(true,true).animate({marginLeft:""+f+"="+e},a.speed)},toLastPage:function(){v.css(a.disableStyle);x[0].removeAttribute("style");o.stop(true,true).animate({marginLeft:-(p-a.showItem)*t},a.speed)},toFirstPage:function(){x.css(a.disableStyle);v[0].removeAttribute("style");o.stop(true,true).animate({marginLeft:0},a.speed)},renderDotView:function(){var g=u.find(".view_dot"),e='<div class="view_dot"><span class="cur"></span>';(g.length)&&(g.remove());for(var f=0;f<c;f++){e+="<span></span>"}e+="</div>";
u.append(e)},dotViewEvent:function(){if(a.viewDot=="dot"){w.renderDotView();r=u.find(".view_dot").children("span");r.unbind("click").bind("click",function(){var e=b(this),f=u.find(".cur").index();s=e.index();e.addClass("cur").siblings().removeClass("cur");if(s==c){w.toLastPage()}else{if(s==0){w.toFirstPage()}else{v[0].removeAttribute("style");x[0].removeAttribute("style");s>f?w.showPlay("-",(s-f)*q):w.showPlay("+",(f-s)*q)}}})}},dotHighlight:function(){if(a.viewDot=="dot"){r=u.find(".view_dot").children("span");r.eq(s).addClass("cur").siblings().removeClass("cur")}}};w.init()});return this}})})(jQuery);var _myOrderObject={oActiv:"",orderListHover:function(){for(var b=0;b<$(".orders_one").length;b++){if($(".orders_one").eq(b).height()<186){$(".li_right").eq(b).height(186);$(".li_p").eq(b).height(186)}$(".li_p").eq(b).height($(".orders_one").eq(b).height())}$(".mod_my_order_list .orders_one").bind("mouseenter",function(){var d=$(this).parents(".border_li"),a=d.index(".border_li");d.addClass("border_li_hover");$(".list_radio").eq(a).addClass("list_radio_checked");if($.support.msie&&parseInt($.support.version)<9){d.css("border-color","#cfcfcf")}d.find(".li_p_del").css("display","block")});$(".mod_my_order_list .orders_one").bind("mouseleave",function(){var d=$(this).parents(".border_li"),a=d.index(".border_li");d.removeClass("border_li_hover");$(".list_radio").eq(a).removeClass("list_radio_checked");
if($.support.msie&&parseInt($.support.version)<9){d.css("border-color","#EAEAEA")}d.find(".li_p_del").css("display","none");d.find(".del_con").css({display:"none",width:"0",opacity:"0"})});$(".mod_my_order_list").delegate(".li_p_del","click",function(){$(this).next().css("display","block");$(this).next().animate({width:"227px",right:"0",opacity:"1"},"fast")});$(".mod_my_order_list .del_con").delegate(".close_window","click",function(){$(this).parents(".li_p").find(".del_con").animate({width:"0",right:"0",opacity:"0"},"fast")});$(".mod_my_order_list .del_con").delegate(".btn_cancel","click",function(){$(this).parents(".li_p").find(".del_con").animate({width:"0",right:"0",opacity:"0"},"fast")});$(".mod_my_order_list .del_con").delegate(".btn_sub","click",function(){var d=$(this);$(this).parents(".li_p").find(".del_con").animate({width:"0",right:"0",opacity:"0"},"fast");
var a=$(this).attr("data-orderId");$.ajax({type:"POST",url:"/order/doDeleteOrder.do",data:{orderId:a},async:false,dataType:"json",success:function(c){if(c.code==0){window.location.href="/order/toOrderList.do"}else{if(c.code==-1){window.location.reload()}else{var f=d.parents(".li_p").find(".del_con").next();f.find(".info > span").html(c.message);f.show();setTimeout(function(){f.hide()},3000)}}},error:function(h,c,g){window.location.reload()}})});$(".tip_massage").delegate(".close_window","click",function(){$(".tip_massage").slideToggle()})},orderLiHover:function(){$(".orderList_hover li").bind("mouseenter",function(){var g=$(this).index()+1,e=parseInt($(this).width())-1,f=parseInt(g*e)+155,h=$(this).parent().width();if(f>h){$(this).find(".puv").addClass("puv_rit_hover");$(this).find(".puvA").addClass("puvA_rit_hover");
$(this).find(".orderV").addClass("orderV_rit_hover");$(this).find(".orderPai").addClass("orderPai_rit_hover");$(this).find(".orderV").css("left","");$(this).find(".orderV").css({right:e+"px",display:"block"});$(this).find(".icon_tuan").addClass("hide");$(this).find(".icon_tuan2").addClass("hide");$(this).find(".orderV").stop(true,false).animate({width:"200px"},"fast")}else{$(this).find(".puv").addClass("puv_hover");$(this).find(".puvA").addClass("puvA_hover");$(this).find(".orderV").css("right","");$(this).find(".orderV").css({left:e+"px",display:"block"});$(this).find(".icon_tuan").addClass("hide");$(this).find(".icon_tuan2").addClass("hide");$(this).find(".orderV").stop(true,false).animate({width:"200px",display:"block"},"fast")}});$(".orderList_hover li").bind("mouseleave",function(){var g=$(this).index()+1,e=parseInt($(this).width())-1,f=parseInt(g*e)+155,h=$(this).parent().width();
if(f>h){$(this).find(".puv").removeClass("puv_rit_hover");$(this).find(".puvA").removeClass("puvA_rit_hover");$(this).find(".orderV").removeClass("orderV_rit_hover");$(this).find(".orderPai").removeClass("orderPai_rit_hover");$(this).find(".icon_tuan").removeClass("hide");$(this).find(".icon_tuan2").removeClass("hide")}else{$(this).find(".puv").removeClass("puv_hover");$(this).find(".puvA").removeClass("puvA_hover");$(this).find(".icon_tuan").removeClass("hide");$(this).find(".icon_tuan2").removeClass("hide")}$(this).find(".orderV").stop().css("width","0px").hide()})},selectClick:function(){var e=$(".hd_order_menu"),d=$(".hd_order_list"),f=$(document);e.removeClass("hover");d.addClass("hide");f.click(function(a){var b=$(a.target);if($(".hd_order_menu").is(":visible")&&b.attr("class")!="hd_order_list"){_myOrderObject.oActiv="";
d.addClass("hide");e.removeClass("hover")}});e.unbind("click").bind("click",function(a){d.addClass("hide");e.removeClass("hover");$(this).addClass("hover");$(this).parent().find("div").addClass("hd_order_listHover");$(this).parent().find("div").removeClass("hide");a.stopPropagation();if(_myOrderObject.oActiv==""){_myOrderObject.oActiv=$(this).attr("_dateId");$(this).addClass("hover");$(this).parent().find("div").addClass("hd_order_listHover");$(this).parent().find("div").removeClass("hide");a.stopPropagation()}else{if(_myOrderObject.oActiv==$(this).attr("_dateId")){_myOrderObject.oActiv="";d.addClass("hide");e.removeClass("hover")}else{_myOrderObject.oActiv=$(this).attr("_dateId");$(this).addClass("hover");$(this).parent().find("div").addClass("hd_order_listHover");$(this).parent().find("div").removeClass("hide");
a.stopPropagation()}}});d.unbind("click").bind("click",function(a){d.addClass("hide");e.removeClass("hover");$(this).removeClass("hd_order_listHover");$(this).parent().find("a").removeClass("hover");$(this).parent().find("a").removeClass("selected");$(this).addClass("hide");a.stopPropagation()})},selectChange:function(){var c=$(".hd_order_list p"),d=$(".hd_returns_list p");c.unbind("click").bind("click",function(a){_myOrderObject.oActiv="";$(this).addClass("hover").siblings().removeClass("hover");$(this).parent().parent().find("div").addClass("hide");$(this).parent().parent().find("a").removeClass("selected");$(this).parent().parent().find("a").removeClass("hover");$(this).parent().parent().find("span").text($.trim($(this).text()));a.stopPropagation()});d.unbind("click").bind("click",function(a){_myOrderObject.oActiv="";
$(this).parent().parent().find(".hd_returns_menu span").text($.trim($(this).text()));a.stopPropagation()})},selectListAutoWidth:function(f){var e={j_conp:$(".select_list").eq(f).find(".sele_fontb"),j_menu:$(".hd_returns_menu_re").eq(f),j_size:20*2,j_font_size:12,j_array:new Array(),j_width:0,j_hd_order_list:$(".hd_returns_list_re").eq(f)};for(var d=0;d<e.j_conp.length;d++){e.j_array.push(e.j_conp.eq(d).text().length)}Array.prototype.max=function(){var b=this[0];var c=this.length;for(var a=1;a<c;a++){if(this[a]>b){b=this[a]}}return b};e.j_width=e.j_array.max()*e.j_font_size+e.j_size;e.j_hd_order_list.css("width",(e.j_width-0)+"px")},reSelect:function(){var b=$(".select_list");_flag=false,_hdVoucherTypeList=$(".hd_returns_list_re"),_mod_package_info=$(".mod_package_info");b.delegate(".hd_returns_menu_re","mouseenter",function(a){_flag=true;
$(this).parent().find("div").removeClass("hide");_mod_package_info.css("z-index","1");a.stopPropagation()});b.delegate(".hd_returns_list_re","mouseenter",function(a){_flag=true;if(_flag){$(this).removeClass("hide");_mod_package_info.css("z-index","1")}a.stopPropagation()});b.delegate(".hd_returns_list_re","mouseleave",function(a){_flag=false;$(this).addClass("hide");_mod_package_info.css("z-index","0");a.stopPropagation()});_hdVoucherTypeList.delegate(".p a","mouseenter",function(d){var a=$(this).find(".oper").text();$(".hd_returns_list_re .p").find(".cell_tip_msg3").addClass("hide");if(a==="申请退货"||a==="申请换货"){$(this).next(".cell_tip_msg3").css("left",($(this).width()+15)+"px").removeClass("hide")}else{$(this).next(".cell_tip_msg3").addClass("hide")}});_hdVoucherTypeList.delegate(".p a","mouseleave",function(a){$(".hd_returns_list_re .p").find(".cell_tip_msg3").addClass("hide")
});b.each(function(a){_myOrderObject.selectListAutoWidth(a)})},track_packages:function(){var b=$(".mod_my_order_list");b.delegate(".genzhong","mouseenter",function(){$(".two_dimensional_code").css({display:"block",left:($(this).offset().left-68)+"px",top:($(this).offset().top+80)+"px"})});b.delegate(".genzhong","mouseleave",function(){$(".two_dimensional_code").css({display:"none",left:($(this).offset().left+50)+"px",top:($(this).offset().top+80)+"px"})})},allCheckStyle:function(){var f=$(".mod_my_order_list dl .input"),g=f.length,e=0;for(var h=0;h<f.length;h++){if(f.eq(h).hasClass("checkbox_c_sed")){e+=1}}$(".cell_toolBar .input").removeClass("checkbox_c_sed").addClass("checkbox_c");if(g>e){$(".cell_toolBar .input").removeClass("checkbox_c_sed").addClass("checkbox_c")}if(g===e){$(".cell_toolBar .input").addClass("checkbox_c_sed").removeClass("checkbox_c")
}},checkboxClick:function(){$(".mod_my_order_list dl").delegate(".input","click",function(){var c="";if($(this).attr("name")==="checkbox"){if($(this).hasClass("checkbox_c")){$(this).removeClass("checkbox_c").addClass("checkbox_c_sed")}else{if($(this).hasClass("checkbox_c_sed")){$(this).removeClass("checkbox_c_sed").addClass("checkbox_c")}}for(var d=0;d<$(".mod_my_order_list a.checkbox_c_sed").length;d++){c+=","+$(".mod_my_order_list a.checkbox_c_sed").eq(d).attr("id")}}_myOrderObject.allCheckStyle()})},allCheckboxClick:function(){$(".cell_toolBar").delegate(".input","click",function(){var b=$(".mod_my_order_list dl .input");if($(this).attr("name")==="checkbox"){if($(this).hasClass("checkbox_c")){$(this).removeClass("checkbox_c").addClass("checkbox_c_sed");b.removeClass("checkbox_c").addClass("checkbox_c_sed")
}else{if($(this).hasClass("checkbox_c_sed")){$(this).removeClass("checkbox_c_sed").addClass("checkbox_c");b.removeClass("checkbox_c_sed").addClass("checkbox_c")}}}_myOrderObject.allCheckStyle()})},userInfoTips:function(){$(".border_link .user").delegate(".user_name","mouseover",function(){$(this).siblings(".tips_box").show()});$(".border_link").delegate(".user","mouseleave",function(){$(this).find(".tips_box").hide()})},logisticsInformation:function(){$(".border_link .logistics_information").delegate(".lo_text","mouseover",function(){$(this).siblings(".lo_info").show()});$(".border_link").delegate(".logistics_information","mouseleave",function(){$(this).find(".lo_info").hide()})},cancelOrders:function(){$(".list_operating .cancel_orders").delegate(".gray_line","click",function(){var b=$(this);
b.siblings(".cancel_con").show()});$(".list_operating .cancel_orders").delegate(".close_window","click",function(){var b=$(this);b.parents(".cancel_con").hide()});$(".list_operating .cancel_orders").delegate(".btn_cancel","click",function(){var b=$(this);b.parents(".cancel_con").hide()});$(".list_operating .cancel_orders").delegate(".btn_sub","click",function(){var f=$(this);f.parents(".cancel_con").hide();var e=$(this).attr("data-orderId");var d=$(this).attr("data-orderType");$.ajax({type:"POST",url:"/order/doCancelOrder.do",data:{orderId:e,orderType:d},async:false,dataType:"json",success:function(a){if(a.code==0){if(a.data!=null){window.location.href="/order/toOrderList.do?cancelOrderId="+a.data}else{window.location.href="/order/toOrderList.do"}}else{if(a.code==-1){window.location.reload()
}else{var b=f.parents(".cancel_con").next();b.find(".info > span").html(a.message);b.show();setTimeout(function(){b.hide()},3000)}}},error:function(c,a,b){window.location.reload()}})})},loadOrderList:function(d,c){$.ajax({type:"POST",url:"/order/orderListPg.do?page="+d+"&orderStatus="+c,async:false,dataType:"html",success:function(a){$(".mod_my_order_list").empty();$(".mod_my_order_list").html(a);_myOrderObject.initFun()},error:function(f,a,b){window.location.href="//home.yhd.com/order/toOrderList.do"}})},loadPgBar:function(){var m=$("#currentPage").val();var i=$("#pageSize").val();var j=$("#totalCount").val();console.log("init-param, currentPage="+m+", pageSize="+i+", totalCount="+j);if(!m||!i||!i){return}m=Number(m);i=Number(i);j=Number(j);var n=parseInt((j+i-1)/i+"");console.info("totalPage="+n);
var k=new Array(8);if(n<=8){for(var o=0;o<n;o++){k[o]=o+1}}else{if(m<=4){k[0]=1;k[1]=2;k[2]=3;k[3]=4;k[4]=5;k[5]=6;k[6]=7;k[7]="...";k[8]=n}else{if(m>4&&m<n-4){k[0]=m-3;k[1]=m-2;k[2]=m-1;k[3]=m;k[4]=m+1;k[5]=m+2;k[6]=m+3;k[7]="...";k[8]=n}else{k[0]=1;k[1]="...";k[2]=n-6;k[3]=n-5;k[4]=n-4;k[5]=n-3;k[6]=n-2;k[7]=n-1;k[8]=n}}}var p="";if(1==m){p+='<span class="page_start"></span>'}else{p+='<a class="page_prev"></a>'}for(var o=0;o<k.length;o++){if(!k[o]){break}if(m==k[o]){p+='<span class="page_cur">'+m+"</span>"}else{if("..."==k[o]){p+='<span class="page_break">...</span>'}else{p+='<a class="page_nav_item">'+k[o]+"</a>"}}}p+='<em class="font_tit">共'+n+'页 到第<input class="sum_text" type="text" value="" id="jumpto" onkeyup="(this.v=function(){this.value=this.value.replace(/[^0-9-]+/,\'\');}).call(this)" onblur="this.v();"/><i class="sum_btn">确定</i></em>';
if(n==m){p+='<span class="page_end"></span>'}else{p+='<a class="page_next"></a>'}$(".turnPageBottom").empty();$(".turnPageBottom").html(p);var l=$(".hd_order_list > p.hover").attr("data-orderStatus");$(".page_prev").bind("click",function(){var a=m-1;console.log("pagePrev="+a);if(a>0){_myOrderObject.loadOrderList(a,l)}});$(".page_next").bind("click",function(){var a=m+1;console.log("pageNext="+a);if(a<=n){_myOrderObject.loadOrderList(a,l)}});$(".page_nav_item").bind("click",function(){var a=$(this).text();_myOrderObject.loadOrderList(a,l)});$(".sum_btn").bind("click",function(){var a=$.trim($(".sum_text").val());if(!a){return}a=Number(a);if(n<a){a=n;$(".sum_text").val(a)}_myOrderObject.loadOrderList(a,l)})},initOrderListEvent:function(){$(".hd_order_list > p").bind("click",function(){var b=$(this).attr("data-orderStatus");
_myOrderObject.loadOrderList(1,b)});$(".operating li.confirmDeliver").delegate("a","click",function(){var c=this;var d=$(this).attr("data-orderId");$.ajax({type:"POST",url:"/order/doConfirmDeliver.do",data:{orderId:d},async:false,dataType:"json",success:function(a){if(a.code==0){window.location.href="/order/toOrderList.do"}else{if(a.code==-1){window.location.reload()}else{var b=$(c).next();b.find(".info > span").html(a.message);b.show();setTimeout(function(){b.hide()},3000)}}},error:function(f,a,b){window.location.reload()}})});$(".list_operating span.timer").each(function(){var c=$(this);var d=window.setInterval(function(){var h=c.html();var m=h.split(":");var t=m[0];var s=m[1];var p=m[2];var q=parseInt(t);var u=parseInt(s);var a=parseInt(p);if(q==0&&u==0&&a==0){window.clearInterval(d);return
}--a;if(a<0){a=59;--u;if(u<0){--q;u=59}}if(q==0&&u==0&&a==0){window.clearInterval(d);return}var r=q;var v=u;var b=a;if(q<10){r="0"+q}if(u<10){v="0"+u}if(a<10){b="0"+a}c.html(r+":"+v+":"+b)},1000)})},checkVenderServiceStatus:function(){$(".vanderCode").each(function(){var d=$(this).val();var e=$(this).attr("order");if(d==4){$("#chat_show_"+e).show();$("#chat_hide_"+e).hide();return}var f="//chat1.jd.com/api/checkChat?venderId="+d+"&returnCharset=utf-8";$.ajax({url:f,dataType:"jsonp",jsonp:"callback",success:function(a){if(a.code==3){$("#chat_show_"+e).hide();$("#chat_hide_"+e).show()}else{if(a.code==1){$("#chat_show_"+e).show();$("#chat_hide_"+e).hide()}else{$("#chat_show_"+e).hide();$("#chat_hide_"+e).hide()}}},error:function(){$("#chat_show_"+e).hide();$("#chat_hide_"+e).hide();console.log("校验客服在线状态失败")
}})})},initFun:function(){this.orderListHover();this.orderLiHover();this.selectClick();this.selectChange();this.reSelect();this.track_packages();this.checkboxClick();this.allCheckboxClick();this.userInfoTips();this.logisticsInformation();this.cancelOrders();this.loadPgBar();this.initOrderListEvent();this.checkVenderServiceStatus()}};function checkChat(d,c){$.ajax({type:"POST",url:"/ordercenter/checkChat.do",dataType:"json",success:function(h){if(null!=h){if(h.code==0){var a=null;if(c==null||c.length==0||c==0){c=4}if(c==4){a="jd_web_h_yhd"}else{a="jd_web_yhd_item"}var b="https://chat.jd.com/index.action?venderId="+c+"&orderId="+d+"&customerAppId=yhd.customer&entry="+a+"&loginToken="+h.result.loginToken+"&fp="+h.result.fp+"&aspid="+h.result.aspid;window.open(b)}else{if(h.code==1){var g=window.location.href;
window.location.href="https://passport.yhd.com/passport/login_input.do?returnUrl="+g}}}else{$("#errorMsg").text("请求异常,稍后重试");$("#errbox").removeClass("hide")}}})}function confirmReceived(b){$.ajax({type:"POST",url:"/order/doConfirmDeliver.do",data:{orderId:b},dataType:"json",success:function(a){if(null!=a){if(a.code==0){window.location.reload()}else{if(a.code==1){yhdPublicLogin.showLoginDivNone(URLPrefix_passport,false,"",function(d){console.log(data)});return}else{if(a.code==-1){window.location.reload()}else{$("#errMsg").text(a.message);$(this).PopupDialog({popupClass:$(".alert_dialog"),maskLayer:true,callback:function(){}})}}}}else{$("#errMsg").text("确认异常");$(this).PopupDialog({popupClass:$(".alert_dialog"),maskLayer:true,callback:function(){}})}},error:function(a,e,f){window.location.reload()
}})}$(document).ready(function(){_myOrderObject.initFun()});